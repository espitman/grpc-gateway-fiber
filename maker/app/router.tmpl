package main

import (
	"github.com/gofiber/fiber/v2"
)

type router struct {
    {{ range .Handlers }}
	{{.HandlerName}} *{{.HandlerName}}
	{{end}}
}

func newRouter(
    {{ range .Handlers }}
    {{.HandlerName}} *{{.HandlerName}},
    {{end}}
) *router {
	return &router{
        {{ range .Handlers }}
		{{.HandlerName}}: {{.HandlerName}},
        {{end}}
	}
}

func (r *router) serve(app *fiber.App) {
	api := app.Group("/api")
	v1 := api.Group("/v1")
    {{ range .Handlers }}
	r.{{.RouterName}}(v1.Group("/{{.Name}}"))
	{{end}}
}
